{"ast":null,"code":"import React, { useEffect, useMemo, useState } from 'react';\nimport { debounce } from './utils';\nimport { Provider } from './context';\nimport smoothscroll from 'smoothscroll-polyfill';\nvar REFS = {};\nvar META = {};\n\nif (typeof window !== 'undefined') {\n  smoothscroll.polyfill();\n}\n\nvar ScrollingProvider = function (_a) {\n  var _b = _a.debounceDelay,\n      debounceDelay = _b === void 0 ? 50 : _b,\n      _c = _a.scrollBehavior,\n      scrollBehavior = _c === void 0 ? 'smooth' : _c,\n      _d = _a.offset,\n      offset = _d === void 0 ? 0 : _d,\n      children = _a.children;\n\n  var _e = useState(''),\n      selected = _e[0],\n      setSelected = _e[1];\n\n  useEffect(function () {\n    document.addEventListener('scroll', debounceScroll, true);\n    handleScroll();\n    return function () {\n      document.removeEventListener('scroll', debounceScroll, true);\n    };\n  }, []);\n\n  var handleScroll = function () {\n    var selectedSection = Object.keys(REFS).reduce(function (acc, id) {\n      var top = REFS[id].current.getBoundingClientRect().top;\n      var differenceFromTop = Math.abs(top);\n      if (differenceFromTop >= acc.differenceFromTop) return acc;\n      return {\n        differenceFromTop: differenceFromTop,\n        id: id\n      };\n    }, {\n      differenceFromTop: 9999,\n      id: ''\n    });\n    if (selected !== selectedSection.id) setSelected(selectedSection.id);\n  };\n\n  var debounceScroll = debounce(handleScroll, debounceDelay);\n\n  var registerRef = function (_a) {\n    var id = _a.id,\n        meta = _a.meta;\n    var ref = React.createRef();\n    REFS[id] = ref;\n    META[id] = meta;\n    return ref;\n  };\n\n  var scrollTo = function (section) {\n    var sectionRef = REFS[section];\n    if (!sectionRef) return console.warn('Section ID not recognized!'); // eslint-disable-line\n\n    var top = sectionRef.current.offsetTop + offset;\n    setSelected(section);\n    window.scrollTo({\n      top: top,\n      behavior: scrollBehavior\n    });\n  };\n\n  var value = useMemo(function () {\n    return {\n      registerRef: registerRef,\n      scrollTo: scrollTo,\n      refs: REFS,\n      meta: META,\n      selected: selected\n    };\n  }, [selected, REFS]);\n  return React.createElement(Provider, {\n    value: value\n  }, children);\n};\n\nexport default ScrollingProvider;","map":{"version":3,"sources":["../src/ScrollingProvider.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { debounce } from './utils';\nimport { Provider } from './context';\nimport smoothscroll from 'smoothscroll-polyfill';\nvar REFS = {};\nvar META = {};\nif (typeof window !== 'undefined') {\n    smoothscroll.polyfill();\n}\nvar ScrollingProvider = function (_a) {\n    var _b = _a.debounceDelay, debounceDelay = _b === void 0 ? 50 : _b, _c = _a.scrollBehavior, scrollBehavior = _c === void 0 ? 'smooth' : _c, _d = _a.offset, offset = _d === void 0 ? 0 : _d, children = _a.children;\n    var _e = useState(''), selected = _e[0], setSelected = _e[1];\n    useEffect(function () {\n        document.addEventListener('scroll', debounceScroll, true);\n        handleScroll();\n        return function () {\n            document.removeEventListener('scroll', debounceScroll, true);\n        };\n    }, []);\n    var handleScroll = function () {\n        var selectedSection = Object.keys(REFS).reduce(function (acc, id) {\n            var top = REFS[id].current.getBoundingClientRect().top;\n            var differenceFromTop = Math.abs(top);\n            if (differenceFromTop >= acc.differenceFromTop)\n                return acc;\n            return {\n                differenceFromTop: differenceFromTop,\n                id: id,\n            };\n        }, {\n            differenceFromTop: 9999,\n            id: '',\n        });\n        if (selected !== selectedSection.id)\n            setSelected(selectedSection.id);\n    };\n    var debounceScroll = debounce(handleScroll, debounceDelay);\n    var registerRef = function (_a) {\n        var id = _a.id, meta = _a.meta;\n        var ref = React.createRef();\n        REFS[id] = ref;\n        META[id] = meta;\n        return ref;\n    };\n    var scrollTo = function (section) {\n        var sectionRef = REFS[section];\n        if (!sectionRef)\n            return console.warn('Section ID not recognized!'); // eslint-disable-line\n        var top = sectionRef.current.offsetTop + offset;\n        setSelected(section);\n        window.scrollTo({\n            top: top,\n            behavior: scrollBehavior,\n        });\n    };\n    var value = useMemo(function () { return ({\n        registerRef: registerRef,\n        scrollTo: scrollTo,\n        refs: REFS,\n        meta: META,\n        selected: selected,\n    }); }, [selected, REFS]);\n    return React.createElement(Provider, { value: value }, children);\n};\nexport default ScrollingProvider;\n//# sourceMappingURL=ScrollingProvider.js.map"]},"metadata":{},"sourceType":"module"}